### Redis 缓存

#### redis 数据结构
1. String、Hash、List、Set、ZSet
1. 订阅：订阅者需要阻塞的读，下线期间数据是丢失的
1. Geo：实现附件的人
1. HyperLogLog：有误差的统计uv等，pfadd、pfcount。不能作布隆过滤器，因为如果判断不存在就加入集合了。

####  redis 实现队列有什么优点和缺点
1. 优点：实现简单（LPUSH+BRPOP），可持久化，保证顺序
1. 缺点：不能重复消费，消费确认ACK麻烦(需要额外支持)，不支持广播模式

#### rdb 和 aof 过程？rdb 为什么可以用创建子进程的方式进行？（这里考察一个 cow）这两种持久化方式会丢数据吗？
1. https://www.cnblogs.com/itdragon/p/7906481.html

#### redis 为什么快？（主要考察一个 IO 多路复用和单线程不加锁）
1. 纯内存
1. 非阻塞IO
1. 避免线程切换和竞争消耗

#### 一致性哈希是什么？节点较少时数据分布不均匀怎么办？

#### 简单说下几种 key 的淘汰策略，redis 里的 lru 算法，什么时候会触发？实现细节是什么？怎么保证淘汰合理的 key？
1. 定时过期：每个设置过期时间的 Key 创建定时器，到过期时间立即清除。内存友好，CPU 不友好
1. 惰性过期：访问 Key 时判断是否过期，过期则清除。CPU 友好，内存不友好
1. 定期过期：隔一定时间，expires 字典中扫描一定数量的 Key，清除其中已过期的 Key。内存和 CPU 资源达到最优的平衡效果

#### 缓存击穿 / 穿透 / 雪崩的处理策略

#### Redis 的同步机制
主从同步。第一次同步时，主节点做一次bgsave，并同时将后续修改操作记录到内存buffer，待完成后将rdb文件全量同步到复制节点，复制节点接受完成后将rdb镜像加载到内存。加载完成后，再通知主节点将期间修改的操作记录同步到复制节点进行重放就完成了同步过程。





